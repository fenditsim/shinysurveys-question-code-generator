[{"name":"app.R","content":"library(shiny)\r\nlibrary(shinythemes)\r\nlibrary(rclipboard)\r\nlibrary(shinyalert)\r\n\r\ndf <- data.frame(question = \"What is your favorite food?\",\r\n                 option = \"Your Answer\",\r\n                 input_type = \"text\",\r\n                 input_id = \"favorite_food\",\r\n                 dependence = NA,\r\n                 dependence_value = NA,\r\n                 required = F)\r\n\r\nui <- fluidPage(\r\n  rclipboardSetup(),\r\n  useShinyalert(), \r\n  theme = shinytheme(\"flatly\"), \r\n  navbarPage(\r\n    collapsible = TRUE,\r\n    title = \"Shinysurveys Question Code Generator\",\r\n    tabPanel(\r\n      title = \"Generator\",\r\n      sidebarLayout(\r\n        sidebarPanel(width = 6,\r\n                     selectInput(inputId = \"type\", label = \"Question Type \", choices = list(\"Numeric\"=\"numeric\", \"Multiple-Choice\"=\"mc\", \"Text\"=\"text\", \"Select\"=\"select\", \"Yes or No\"=\"y/n\", \"Slider\"=\"slider\", \"Date\"=\"date\", \"Matrix\"=\"matrix\")),\r\n                     textAreaInput(inputId = \"question\", label = \"Question(s)\", value = \"What is your age?\"),\r\n                     conditionalPanel(condition = \"input.type != 'text' && input.type != 'y/n' && input.type != 'slider' && input.type != 'date'\", textAreaInput(inputId = \"option\", label = \"What are the options? (Press Enter after inputting an option)\", value = \"28\")),\r\n                     conditionalPanel(condition = \"input.type == 'slider'\",\r\n                                      textInput(inputId = \"slider.min\", label = \"Minimum\", width = \"100%\"),\r\n                                      textInput(inputId = \"slider.max\", label = \"Maximum\", width = \"100%\"),\r\n                                      textInput(inputId = \"slider.value\", label = \"Value\", width = \"100%\")\r\n                     ),\r\n                     conditionalPanel(condition = \"input.type == 'date'\",\r\n                                      dateInput(inputId = \"date.min\", label = \"Minimum Date\", width = \"100%\", value = Sys.Date()-10),\r\n                                      dateInput(inputId = \"date.max\", label = \"Maximum Date\", width = \"100%\", value = Sys.Date()+10),\r\n                                      dateInput(inputId = \"date.value\", label = \"Value\", width = \"100%\", value = Sys.Date())\r\n                     ),\r\n                     textInput(inputId = \"name\", label = \"Question's name\", value = \"q.age\", width = \"100%\"),\r\n                     textInput(inputId = \"id\", label = \"Question's ID \", value = \"age\", width = \"100%\"),\r\n                     selectInput(inputId = \"required\", label = \"Is this question required? \", selected = F, choices = list(\"Yes\"=T, \"No\"=F)),\r\n                     conditionalPanel(condition = \"input.type == 'mc' || input.type == 'text' || input.type == 'select'\", \r\n                                      selectInput(inputId = \"dependence\", label = \"Does this question depend on another? \", selected = \"No\", choices = list(\"No\"=\"No\", \"Yes\"=\"Yes\")),\r\n                     ),\r\n                     \r\n                     conditionalPanel(condition = \"input.dependence == 'Yes'\",\r\n                                      textInput(inputId = \"dependence_value\", label = \" What is the dependent value? \", value = \"\"),\r\n                                      textInput(inputId = \"dependence_value_id\", label = \"What is ID for dependent value \", width = \"100%\"),\r\n                                      selectInput(inputId = \"dependence_value_required\", label = \"Is dependence question required? \", selected = \"No\", choices = list(\"Yes\"=T, \"No\"=F)),\r\n                     )\r\n        ),\r\n        mainPanel(width = 6,\r\n                  rclipboardSetup(),\r\n                  p(\"Click Copy button to copy the completed code below!\"),\r\n                  verbatimTextOutput(outputId = \"question\"),\r\n                  uiOutput(\"clip\")\r\n        )\r\n      )\r\n    ),\r\n    tabPanel(\r\n      title = \"Reference\",\r\n      fluidRow(\r\n        p(\"This shiny application generates code of question in shinysurveys.\"),\r\n        p(\"For more information about shinysurveys, please visit\", a(href=\"https://github.com/jdtrat/shinysurveys\", \"here\", target=\"_blank\")),\r\n        p(\"This shiny application uses shinyalert for creating a popup message. For more information about shinyalert, please visit \", a(\"here\", href=\"https://github.com/daattali/shinyalert\", target=\"_blank\")), \r\n        p(\"For more information about this shiny website, please visit\", a(href=\"https://github.com/fendit/shinysurveys-question-code-generator\", \"here\", target=\"_blank\")),\r\n        p(\"If you found any errors with this code generator, please report\", a(href=\"https://github.com/fendit/shinysurveys-question-code-generator/issues\", \"here\", target=\"_blank\")),\r\n        div(style = \"position: absolute; bottom: 0;\", \r\n            p(\"Author:\", a(\"Fendi Tsim\", href=\"https://github.com/fendit\", target=\"_blank\")),\r\n            p(\"Version: 0.2.0\"),\r\n            p(\"Date: 2023-08-27\"))\r\n      )\r\n    ),\r\n  )\r\n)\r\n\r\nserver <- function(input, output, session){\r\n  \r\n  # Generate the code output\r\n  result <- reactive({\r\n    original <- paste0(input$name, \" <- data.frame(question = \", if (input$type==\"matrix\") paste0(\"rep(c(\",paste(shQuote(unlist(strsplit(input$question, \"\\n\")), type = \"cmd\"), collapse = \", \"), \"), each = \", length(unlist(strsplit(input$option, \"\\n\"))), \")\") else paste0('\"', input$question, '\"'), \",\", \r\n                       \"\\n                option = \", if (input$type==\"text\" | input$type == \"slider\" | input$type == \"date\") 'NA' else if (input$type==\"y/n\") 'c(\"Yes\", \"No\")' else paste0(\"c(\",paste(shQuote(unlist(strsplit(input$option, \"\\n\")), type = \"cmd\"), collapse = \", \"), \")\"), \",\", \r\n                       \"\\n                input_type = \", paste0('\"', input$type, '\"'), \",\", \r\n                       \"\\n                input_id = \", paste0('\"', input$id, '\"'), \",\", \r\n                       \"\\n                dependence = NA,\", \r\n                       \"\\n                dependence_value = NA,\", \r\n                       \"\\n                required = \", input$required,\r\n                       \"\\n                )\"\r\n                       )\r\n    \r\n    dependence <- paste0(\"q[nrow(q)+1, ] <- c(question = \", paste0('\"', input$question, '\"'), \", \", \r\n                         \"\\n                    option = NA, \", \r\n                         paste0('\\n                    input_type = \"text\"'), \", \", \r\n                         paste0('\\n                    input_id = \"', input$dependence_value_id, '\"'), \", \", \r\n                         paste0('\\n                    dependence = \"', input$id, '\"'), \", \", \r\n                         paste0('\\n                    dependence_value = \"', input$dependence_value, '\"'),\", \", \r\n                         \"\\n                    required = \", input$dependence_value_required,\r\n                         \"\\n                    )\"\r\n                         )\r\n    \r\n    extend <- paste0('extendInputType(input_type = ', paste0('\"', input$type, '\"'),', {',\r\n                     '\\n    ', 'shiny::', if (input$type == 'slider') 'slider' else 'date' ,'Input(',\r\n                     '\\n        ', 'inputId = surveyID(),',\r\n                     '\\n        ', 'label = surveyLabel(),', \r\n                     '\\n        ', 'min = ', if (input$type == 'slider') input$slider.min else paste0('as.Date(\"', input$date.min, '\")'), ', ', \r\n                     '\\n        ', 'max = ', if (input$type == 'slider') input$slider.max else paste0('as.Date(\"', input$date.max, '\")'), ', ', \r\n                     '\\n        ', 'value = ', if (input$type == 'slider') input$slider.value else paste0('as.Date(\"', input$date.value, '\")'), \r\n                     '\\n    ', ')',\r\n                     '\\n})'\r\n                     )\r\n    \r\n    question <- if (input$type == 'slider' | input$type=='date') paste0(original, \"\\n\", \"\\n\", \"# Register a \", input$type, \" input with custom min & max\" , \"\\n\", extend) else{ if (input$dependence == 'No') original else paste0(original, \"\\n\", \"\\n\", \"# For Dependence Value\", \"\\n\", dependence)}\r\n  })\r\n  \r\n  output$question <- renderText({\r\n    result()\r\n  })\r\n\r\n  # Button for copying the code output\r\n  output$clip <- renderUI({\r\n    rclipButton(\r\n      inputId = \"clipbtn\", \r\n      label = \"Copy\", \r\n      clipText = result(), \r\n      icon = icon(\"clipboard\"))\r\n  })\r\n  \r\n  observeEvent(input$clipbtn, \r\n               shinyalert(\r\n                 title = \"Copied!\",\r\n                 text = \"Enjoy coding :D\",\r\n                 size = \"s\", \r\n                 closeOnEsc = TRUE,\r\n                 closeOnClickOutside = FALSE,\r\n                 html = FALSE,\r\n                 type = \"success\",\r\n                 showConfirmButton = TRUE,\r\n                 showCancelButton = FALSE,\r\n                 confirmButtonText = \"OK\",\r\n                 confirmButtonCol = \"#AEDEF4\",\r\n                 timer = 0,\r\n                 imageUrl = \"\",\r\n                 animation = TRUE\r\n                 )\r\n               )\r\n}\r\n\r\nshinyApp(ui, server)","type":"text"},{"name":"README.md","content":"### Shinysurveys question code generator\n\nThis is a shiny web application (link [here](https://ft3pi.shinyapps.io/shinysurveys-question-code-generator/)) for generating question code for [shinysurveys](https://shinysurveys.jdtrat.com/index.html).\n","type":"text"},{"name":"shinysurveys-question-code-generator.Rproj","content":"Version: 1.0\n\nRestoreWorkspace: Default\nSaveWorkspace: Default\nAlwaysSaveHistory: Default\n\nEnableCodeIndexing: Yes\nUseSpacesForTab: Yes\nNumSpacesForTab: 2\nEncoding: UTF-8\n\nRnwWeave: Sweave\nLaTeX: pdfLaTeX\n","type":"text"}]
